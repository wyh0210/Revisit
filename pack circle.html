<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pack Circles</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        svg {
            border: 1px solid #ccc; /* Set border for SVG */
        }
        .node {
            stroke: #fff; /* Set stroke color for nodes */
            stroke-width: 2px; /* Set stroke width for nodes */
        }
        .highlight {
            fill: black; /* Set fill color for highlighted nodes */
        }
    </style>
</head>
<body>
    <div id="container"></div>
    <script>
        // Embedded JSON data
        const jsonData = [
            // Your JSON data here
        ];

        const NUM_EXAMPLES = 20; // Number of examples
        const CIRCLES_PER_EXAMPLE = 5; // Number of circles per example
        const MIN_R = 10; // Minimum radius
        const MAX_R = 25; // Maximum radius
        const MAX_X = 100; // Maximum value on the X-axis
        const MAX_Y = 100; // Maximum value on the Y-axis

        // Setup SVG container
        const margin = {top: 10, right: 20, bottom: 30, left: 50},
            width = 500 - margin.left - margin.right,
            height = 420 - margin.top - margin.bottom;

        const svg = d3.select("#container")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);

        // Use embedded data instead of loading from file
        const chosen_example = Math.floor(Math.random() * NUM_EXAMPLES); // Randomly choose an example
        const circle_data = jsonData[chosen_example]; // Get data for the chosen example

        // Draw Pack Circles
        const pack = d3.pack()
            .size([width, height])
            .padding(3);

        const root = d3.hierarchy({children: circle_data})
            .sum(d => d.value);

        const nodes = pack(root).leaves();

        svg.selectAll(".node")
            .data(nodes)
            .enter().append("circle")
            .attr("class", "node")
            .attr("cx", d => d.x)
            .attr("cy", d => d.y)
            .attr("r", d => d.r)
            .style("fill", "#69b3a2");

        // Highlight the third and fifth circles
        nodes.filter((d, i) => i === 2 || i === 4).forEach(d => {
            svg.append("circle")
                .attr("class", "highlight")
                .attr("cx", d.x)
                .attr("cy", d.y)
                .attr("r", 5);
        });

        // Calculate and output the difference or ratio
        const diff = nodes[4].r / nodes[2].r;
        console.log("Actual difference is: " + diff);
    </script>
</body>
</html>
